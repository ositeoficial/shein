// Código para seu site (tracking.js)
function trackPageView(source) {
    fetch('https://script.google.com/macros/s/AKfycbzR0sb1odYZoRIpiTBb5Gex4hacLBTnxzTR-grmVsSjbDInBcFPFEn2jS1TD6fk5WcXMg/exec', {
        method: 'POST',
        mode: 'no-cors',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            type: 'pageview',
            source: source,
            timestamp: new Date().toISOString()
        })
    });
}

function trackButtonClick(source) {
    fetch('https://script.google.com/macros/s/[SEU_ID_DO_SCRIPT_WEB_APP]/exec', {
        method: 'POST',
        mode: 'no-cors',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            type: 'buttonclick',
            source: source,
            timestamp: new Date().toISOString()
        })
    });
}

// HTML da sua landing page
<script>
    // Pegar o parâmetro source da URL
    const urlParams = new URLSearchParams(window.location.search);
    const source = urlParams.get('source');
    
    // Registrar visualização da página
    if (source) {
        trackPageView(source);
    }
    
    // Adicionar ao seu botão de afiliado
    document.getElementById('botao-afiliado').onclick = function() {
        if (source) {
            trackButtonClick(source);
        }
        // Seu código atual de redirecionamento
        window.location.href = `https://glstrck.com/aff_c?offer_id=163&aff_id=18892&source=${source}`;
    };
</script>
